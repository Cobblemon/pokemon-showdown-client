{"version":3,"file":"teams-view.js","names":["exportSet","set","out","name","species","gender","item","ability","level","shiny","happiness","isNaN","pokeball","hpType","dynamaxLevel","gigantamax","teraType","first","evs","_i2","_Dex$statNames2","Dex","statNames","length","stat","BattleStatNames","nature","ivs","_i4","_Dex$statNames4","undefined","_i6","_set$moves2","moves","move","startsWith","charAt","slice","PokemonSet","_ref","preact","h","Fragment","filter","map","index","arr","substr","PSIcon","type","get","hideAlt","SetBlock","_preact$Component","apply","arguments","_inheritsLoose","_proto","prototype","render","props","gen","prefs","spriteData","getSpriteData","forceResize","matchMedia","matches","mode","w","style","flex","width","pad","src","url","height","textAlign","Component","TeamViewer","_preact$Component2","_this","call","id","pw","state","team","error","copyButtonMsg","displayMode","localStorage","getItem","spriteGen","Number","manageOpen","changesMade","teamEdits","editError","args","checkTeamID","_proto2","_document$querySelect","_this2","_this$state$teamEdits","_this$state$team","title","ownerid","format","views","teamData","unpackTeam","is2Col","isDark","document","querySelector","classList","link","wordWrap","className","href","Config","routes","teams","color","BattleLog","usernameColor","display","gap","toID","getShowdownUsername","onClick","changeManage","disabled","copyTeam","changeDisplayMode","changeColorMode","onChange","ev","changeSpriteGen","value","num","editTeamValue","n","onInput","commitEdit","alignItems","flexWrap","rowGap","colGap","includes","_this$id$split","split","test","setState","JSON","stringify","loadTeamData","event","setItem","target","_document$querySelect2","remove","removeItem","add","forceUpdate","_this3","Net","query","teamid","password","full","then","resultText","result","parse","_unused","actionerror","e","code","message","_this4","navigator","clipboard","writeText","join","setTimeout","val","_ref2","_this$state","currentTarget","changes","_this$state$team2","BattleAliases","_this$state$team3","_this5","Object","assign","_this5$state$team","_unused2","history","pushState","URL","location"],"sources":["../src/teams-view.tsx"],"sourcesContent":["/** @jsx preact.h */\n/** @jsxFrag preact.Fragment */\nimport preact from '../../play.pokemonshowdown.com/js/lib/preact';\nimport { Net, PSIcon, getShowdownUsername, unpackTeam } from './utils';\nimport { BattleLog } from '../../play.pokemonshowdown.com/src/battle-log';\nimport type { PageProps } from './teams';\nimport { Dex } from '../../play.pokemonshowdown.com/src/battle-dex';\nimport { BattleStatNames } from '../../play.pokemonshowdown.com/src/battle-dex-data';\n\ndeclare const toID: (str: any) => string;\ndeclare const BattleAliases: Record<string, string>;\n\ninterface Team {\n\tteam: string;\n\ttitle: string;\n\tviews: number;\n\townerid: string;\n\tformat: string;\n\tteamid: string;\n\tprivate: number;\n}\n\nfunction exportSet(set: Dex.PokemonSet) {\n\tlet out = ``;\n\n\t// core\n\tif (set.name && set.name !== set.species) {\n\t\tout += `${set.name} (${set.species})`;\n\t} else {\n\t\tout += set.species;\n\t}\n\tif (set.gender === 'M') out += ` (M)`;\n\tif (set.gender === 'F') out += ` (F)`;\n\tif (set.item) out += ` @ ${set.item}`;\n\tout += `  \\n`;\n\n\tif (set.ability) {\n\t\tout += `Ability: ${set.ability}  \\n`;\n\t}\n\n\t// details\n\tif (set.level && set.level !== 100) {\n\t\tout += `Level: ${set.level}  \\n`;\n\t}\n\tif (set.shiny) {\n\t\tout += `Shiny: Yes  \\n`;\n\t}\n\tif (typeof set.happiness === 'number' && set.happiness !== 255 && !isNaN(set.happiness)) {\n\t\tout += `Happiness: ${set.happiness}  \\n`;\n\t}\n\tif (set.pokeball) {\n\t\tout += `Pokeball: ${set.pokeball}  \\n`;\n\t}\n\tif (set.hpType) {\n\t\tout += `Hidden Power: ${set.hpType}  \\n`;\n\t}\n\tif (typeof set.dynamaxLevel === 'number' && set.dynamaxLevel !== 10 && !isNaN(set.dynamaxLevel)) {\n\t\tout += `Dynamax Level: ${set.dynamaxLevel}  \\n`;\n\t}\n\tif (set.gigantamax) {\n\t\tout += `Gigantamax: Yes  \\n`;\n\t}\n\tif (set.teraType) {\n\t\tout += `Tera Type: ${set.teraType}  \\n`;\n\t}\n\n\t// stats\n\tlet first = true;\n\tif (set.evs) {\n\t\tfor (const stat of Dex.statNames) {\n\t\t\tif (!set.evs[stat]) continue;\n\t\t\tif (first) {\n\t\t\t\tout += `EVs: `;\n\t\t\t\tfirst = false;\n\t\t\t} else {\n\t\t\t\tout += ` / `;\n\t\t\t}\n\t\t\tout += `${set.evs[stat]} ${BattleStatNames[stat]}`;\n\t\t}\n\t}\n\tif (!first) {\n\t\tout += `  \\n`;\n\t}\n\tif (set.nature) {\n\t\tout += `${set.nature} Nature  \\n`;\n\t}\n\tfirst = true;\n\tif (set.ivs) {\n\t\tfor (const stat of Dex.statNames) {\n\t\t\tif (set.ivs[stat] === undefined || isNaN(set.ivs[stat]) || set.ivs[stat] === 31) continue;\n\t\t\tif (first) {\n\t\t\t\tout += `IVs: `;\n\t\t\t\tfirst = false;\n\t\t\t} else {\n\t\t\t\tout += ` / `;\n\t\t\t}\n\t\t\tout += `${set.ivs[stat]} ${BattleStatNames[stat]}`;\n\t\t}\n\t}\n\tif (!first) {\n\t\tout += `  \\n`;\n\t}\n\n\t// moves\n\tfor (let move of set.moves) {\n\t\tif (move.startsWith(`Hidden Power `) && move.charAt(13) !== '[') {\n\t\t\tmove = `Hidden Power [${move.slice(13)}]`;\n\t\t}\n\t\tout += `- ${move}  \\n`;\n\t}\n\n\treturn out;\n}\n\nfunction PokemonSet({ set }: { set: Dex.PokemonSet }) {\n\treturn <article class=\"psset\">\n\t\t{set.name && set.name !== set.species ? <>{set.name} ({set.species})</> : <>{set.species}</>}\n\t\t{set.gender ? <> ({set.gender})</> : <></>}\n\t\t{set.item ? <> @ {set.item} </> : <></>}\n\t\t<br />\n\t\t{set.ability ? <>Ability: {set.ability}<br /></> : <></>}\n\t\t{set.level && set.level !== 100 ? <>Level: {set.level}<br /></> : <></>}\n\t\t{set.shiny ? <>Shiny: Yes<br /></> : <></>}\n\t\t{set.teraType ? <>Tera Type: {set.teraType}<br /></> : <></>}\n\n\t\t{set.evs ? <>{Dex.statNames.filter(stat => set.evs![stat]).map((stat, index, arr) => (\n\t\t\t<>\n\t\t\t\t{index === 0 ? 'EVs: ' : ''}\n\t\t\t\t{set.evs![stat]} {BattleStatNames[stat]}\n\t\t\t\t{index !== (arr.length - 1) ? ' / ' : ''}\n\t\t\t</>\n\t\t))}<br /></> : <></>}\n\n\t\t{set.nature ? <>{set.nature} Nature<br /></> : <></>}\n\n\t\t{set.ivs ? <>{Dex.statNames\n\t\t\t.filter(stat => !(set.ivs![stat] === undefined || isNaN(set.ivs![stat]) || set.ivs![stat] === 31))\n\t\t\t.map((stat, index, arr) =>\n\t\t\t\t<>\n\t\t\t\t\t{index === 0 ? 'IVs: ' : ''}\n\t\t\t\t\t{set.ivs![stat]} {BattleStatNames[stat]}\n\t\t\t\t\t{index !== (arr.length - 1) ? ' / ' : ''}\n\t\t\t\t</>\n\t\t\t)}<br /></> : <></>}\n\n\t\t{set.moves ? set.moves.map(move => {\n\t\t\tif (move.substr(0, 13) === 'Hidden Power ') {\n\t\t\t\tconst hpType = move.slice(13);\n\t\t\t\tmove = move.slice(0, 13);\n\t\t\t\tmove = `${move}[${hpType}]`;\n\t\t\t}\n\t\t\t// hide the alt so it doesn't interfere w/ copy/pasting\n\t\t\treturn <>- {move} <PSIcon type={Dex.moves.get(move).type} hideAlt /><br /></>;\n\t\t}) : <></>}\n\n\t\t{typeof set.happiness === 'number' && set.happiness !== 255 && !isNaN(set.happiness) ?\n\t\t\t<>Happiness: {set.happiness}<br /></> :\n\t\t\t<></>}\n\t\t{typeof set.dynamaxLevel === 'number' && set.dynamaxLevel !== 10 && !isNaN(set.dynamaxLevel) ?\n\t\t\t<>Dynamax Level: {set.dynamaxLevel}<br /></> :\n\t\t\t<></>}\n\t\t{set.gigantamax ? <>Gigantamax: Yes<br /></> : <></>}\n\t</article>;\n}\n\nclass SetBlock extends preact.Component<{\n\tset: Dex.PokemonSet, gen: number, mode?: string | null,\n}> {\n\trender() {\n\t\tconst set = this.props.set;\n\t\tconst gen = this.props.gen || (Dex.prefs('noanim') ? 5 : 6);\n\t\tconst spriteData = Dex.getSpriteData(\n\t\t\tDex.species.get(set.species),\n\t\t\ttrue,\n\t\t\t{ gen, shiny: set.shiny, gender: set.gender as 'F' }\n\t\t);\n\t\tlet forceResize = 110;\n\t\tif (matchMedia(\"(max-width: 450px)\").matches && this.props.mode === '2col') {\n\t\t\tforceResize = 55;\n\t\t}\n\t\tif (spriteData.w > forceResize) {\n\t\t\tconst w = spriteData.w;\n\t\t\tspriteData.w *= (forceResize / w);\n\t\t\tspriteData.h *= (forceResize / w);\n\t\t}\n\t\treturn <div>\n\t\t\t<div style={{ flex: '0 0 20%', width: 'auto', pad: '3px' }}>\n\t\t\t\t<img\n\t\t\t\t\tsrc={spriteData.url}\n\t\t\t\t\twidth={spriteData.w}\n\t\t\t\t\theight={spriteData.h}\n\t\t\t\t/>\n\t\t\t\t{set.item ? <PSIcon item={set.item} /> : <></>}\n\t\t\t</div>\n\t\t\t<div style={{ flex: \"0 0 80%\", textAlign: 'left' }}>\n\t\t\t\t<PokemonSet set={set} />\n\t\t\t</div>\n\t\t</div>;\n\t}\n}\n\nexport class TeamViewer extends preact.Component<PageProps> {\n\tid: string;\n\tpw?: string;\n\toverride state = {\n\t\tteam: undefined as null | void | Team,\n\t\terror: undefined as string | undefined,\n\t\tcopyButtonMsg: false as boolean,\n\t\tdisplayMode: localStorage.getItem('teamdisplaymode') || null,\n\t\tspriteGen: Number(localStorage.getItem('spritegen')) || 6,\n\t\tmanageOpen: false,\n\t\tchangesMade: false,\n\t\tteamEdits: null as { format?: string, private?: number } | null,\n\t\teditError: null as null | string,\n\t};\n\tconstructor(props: PageProps) {\n\t\tsuper(props);\n\t\tthis.id = props.args.id;\n\n\t\tthis.checkTeamID();\n\t}\n\trender() {\n\t\tif (this.state.error) {\n\t\t\treturn <div class=\"message-error\">{this.state.error}</div>;\n\t\t}\n\t\tif (!this.state.team) {\n\t\t\treturn <div class=\"section\" style={{ textAlign: 'center' }}>{\n\t\t\t\ttypeof this.state.team === 'undefined' ?\n\t\t\t\t\t'Loading...' :\n\t\t\t\t\t<>\n\t\t\t\t\t\t<h2 class=\"message-error\">Team not found.</h2><br />\n\t\t\t\t\t\t<em>Either it doesn't exist or it's password protected. Check the link?</em>\n\t\t\t\t\t</>\n\t\t\t}</div>;\n\t\t}\n\t\tconst { team, title, ownerid, format, views } = this.state.team;\n\t\tconst teamData = unpackTeam(team);\n\t\tconst is2Col = this.state.displayMode === '2col';\n\t\tconst isDark = document.querySelector('html')?.classList[0] === 'dark';\n\t\tconst link = this.id + (this.state.team.private ? `-${this.state.team.private}` : '');\n\n\t\treturn <div class=\"section\" style={{ wordWrap: 'break-word' }}>\n\t\t\t<div name=\"header\" className=\"noselect\">\n\t\t\t\t<small><a href={'//' + Config.routes.teams}><i class=\"fa fa-arrow-left\"></i></a></small>\n\t\t\t\t<h1>{title}</h1>\n\t\t\t\tOwner: <strong style={{ color: BattleLog.usernameColor(ownerid as any) }}>{ownerid}</strong><br />\n\t\t\t\tFormat: {format}<br />\n\t\t\t\tViews: {views}<br />\n\t\t\t\t<label>Shortlink: </label><a href={`https://psim.us/t/${link}`}>https://psim.us/t/{link}</a><br />\n\t\t\t\t<hr />\n\t\t\t\t<div name=\"manage\" style={{ display: 'flex', gap: '5px' }}>\n\t\t\t\t\t{toID(getShowdownUsername()) === this.state.team.ownerid && <button\n\t\t\t\t\t\tclass={this.state.manageOpen ? `button notifying` : `button`}\n\t\t\t\t\t\tonClick={() => this.changeManage()}\n\t\t\t\t\t>Manage</button>}\n\t\t\t\t\t<button\n\t\t\t\t\t\tclass=\"button\"\n\t\t\t\t\t\tdisabled={!this.state.team || this.state.copyButtonMsg}\n\t\t\t\t\t\tonClick={() => this.copyTeam()}\n\t\t\t\t\t>{this.state.copyButtonMsg ? 'Copied!' : 'Copy team'}</button>\n\t\t\t\t\t<button class=\"button\" onClick={() => this.changeDisplayMode()}>Display: {is2Col ? '2-column' : '1-column'}</button>\n\t\t\t\t\t<button class=\"button\" onClick={() => this.changeColorMode()}>Use {isDark ? 'light' : 'dark'} mode</button>\n\t\t\t\t\t<select\n\t\t\t\t\t\tonChange={ev => this.changeSpriteGen(ev)}\n\t\t\t\t\t\tvalue={this.state.spriteGen}\n\t\t\t\t\t\tclass=\"button\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{[1, 2, 3, 4, 5, 6].map(num => <option value={num}>Gen {num} Sprites</option>)}\n\t\t\t\t\t</select>\n\t\t\t\t</div>\n\t\t\t\t<hr />\n\t\t\t\t{this.state.editError && <>\n\t\t\t\t\t<div class=\"message-error\">{this.state.editError}</div>\n\t\t\t\t\t<hr />\n\t\t\t\t</>}\n\t\t\t\t{this.state.manageOpen && <>\n\t\t\t\t\t<label>Team visibility: </label>\n\t\t\t\t\t<select\n\t\t\t\t\t\tclass=\"button\"\n\t\t\t\t\t\tvalue={this.state.teamEdits?.private || this.state.team.private ? 1 : 0}\n\t\t\t\t\t\tonChange={ev => this.editTeamValue('private', ev)}\n\t\t\t\t\t>\n\t\t\t\t\t\t{[1, 0].map(n => <option value={n}>{n ? 'private' : 'public'}</option>)}\n\t\t\t\t\t</select><br />\n\t\t\t\t\t<label>Team format: </label><input onInput={ev => this.editTeamValue('format', ev)} />\n\t\t\t\t\t{this.state.changesMade && <>\n\t\t\t\t\t\t<br /><button class=\"button notifying\" onClick={() => this.commitEdit()}>Save changes</button>\n\t\t\t\t\t</>}\n\t\t\t\t\t<hr />\n\t\t\t\t</>}\n\t\t\t</div>\n\t\t\t<div\n\t\t\t\tname=\"sets\"\n\t\t\t\tstyle={{ display: 'flex', alignItems: 'stretch', flexWrap: 'wrap', rowGap: '1rem', colGap: is2Col ? '2rem' : '' }}\n\t\t\t>\n\t\t\t\t{teamData.map(\n\t\t\t\t\tset => (\n\t\t\t\t\t\t<div style={{ flex: `0 0 ${is2Col ? 50 : 100}%` }}>\n\t\t\t\t\t\t\t<span style={{ display: 'flex' }}>\n\t\t\t\t\t\t\t\t<SetBlock set={set} gen={this.state.spriteGen} mode={this.state.displayMode} />\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</div>;\n\t}\n\tcheckTeamID() {\n\t\tif (this.id.includes('-')) {\n\t\t\t[this.id, this.pw] = this.id.split('-');\n\t\t}\n\t\tif (!/^\\d+$/.test(this.id)) {\n\t\t\tthis.setState({ error: \"Invalid team ID: \" + JSON.stringify(this.props.args) });\n\t\t\treturn;\n\t\t}\n\t\tthis.loadTeamData();\n\t}\n\n\tchangeManage() {\n\t\tthis.setState({ manageOpen: !this.state.manageOpen });\n\t}\n\n\tchangeSpriteGen(event: any) {\n\t\tlocalStorage.setItem('spritegen', `${event.target.value}`);\n\t\tthis.setState({ spriteGen: event.target.value });\n\t}\n\n\tchangeDisplayMode() {\n\t\tif (this.state.displayMode === '2col') {\n\t\t\tthis.state.displayMode = 'default';\n\t\t} else {\n\t\t\tthis.state.displayMode = '2col';\n\t\t}\n\t\tlocalStorage.setItem('teamdisplaymode', this.state.displayMode);\n\t\tthis.setState({ displayMode: this.state.displayMode });\n\t}\n\n\tchangeColorMode() {\n\t\tconst classList = document.querySelector('html')?.classList;\n\t\tconst isDark = classList?.[0] === 'dark';\n\t\tif (isDark) {\n\t\t\tclassList.remove('dark');\n\t\t\tlocalStorage.removeItem('darkmode');\n\t\t} else {\n\t\t\tclassList?.add('dark');\n\t\t\tlocalStorage.setItem('darkmode', 'true');\n\t\t}\n\t\t// not something we keep in elem state but... still gotta poke it to update\n\t\tthis.forceUpdate();\n\t}\n\n\tloadTeamData() {\n\t\tvoid Net('/api/getteam').get({ query: { teamid: this.id, password: this.pw, full: 1 } }).then(resultText => {\n\t\t\tif (resultText.startsWith(']')) resultText = resultText.slice(1);\n\t\t\tlet result;\n\t\t\ttry {\n\t\t\t\tresult = JSON.parse(resultText);\n\t\t\t} catch {\n\t\t\t\tresult = { actionerror: \"Malformed response received. Try again later.\" };\n\t\t\t}\n\t\t\tif (result.actionerror) {\n\t\t\t\tthis.setState({ error: result.actionerror });\n\t\t\t} else {\n\t\t\t\tthis.setState({ team: result.team === null ? result.team : result });\n\t\t\t}\n\t\t}).catch(e => {\n\t\t\tthis.setState({ error: `HTTP${e.code}: ${e.message}` });\n\t\t});\n\t}\n\n\tcopyTeam() {\n\t\tif (!this.state.team) return;\n\t\tconst team = unpackTeam(this.state.team.team);\n\t\tnavigator.clipboard.writeText(team.map(exportSet).join('\\n'));\n\t\tthis.setState({ copyButtonMsg: true });\n\t\tsetTimeout(() => {\n\t\t\tthis.setState({ copyButtonMsg: false });\n\t\t}, 1000);\n\t}\n\n\teditTeamValue(val: 'format' | 'private', { currentTarget }: any) {\n\t\t(this.state.teamEdits ||= {})[val] = currentTarget.value;\n\t\tlet changes;\n\t\tif (val === 'format') {\n\t\t\tlet format = toID(currentTarget.value);\n\t\t\tformat = toID(BattleAliases[format]) || format;\n\t\t\tif (!/^gen\\d+/.test(format)) {\n\t\t\t\tformat = `gen9${format}`;\n\t\t\t}\n\t\t\tchanges = changes || format !== this.state.team?.format;\n\t\t} else if (val === 'private') {\n\t\t\tchanges = changes || currentTarget.value !== this.state.team?.private;\n\t\t}\n\t\tthis.setState({\n\t\t\tteamEdits: this.state.teamEdits,\n\t\t\tchangesMade: changes,\n\t\t});\n\t}\n\n\tcommitEdit() {\n\t\tif (!this.state.changesMade || !this.state.team) return;\n\t\tvoid Net('/api/editteam').get({\n\t\t\tquery: { teamid: this.id, ...this.state.teamEdits },\n\t\t}).then(resultText => {\n\t\t\tif (resultText.startsWith(']')) resultText = resultText.slice(1);\n\t\t\tlet result;\n\t\t\ttry {\n\t\t\t\tresult = JSON.parse(resultText);\n\t\t\t} catch {\n\t\t\t\tresult = { actionerror: \"Malformed response received. Try again later.\" };\n\t\t\t}\n\t\t\tif (result.team.private !== this.state.team?.private) {\n\t\t\t\thistory.pushState({}, '', new URL(\n\t\t\t\t\tlocation.href.split(this.id)[0] + this.id +\n\t\t\t\t\t(result.team.private ? `-${result.team.private}` : '')\n\t\t\t\t));\n\t\t\t}\n\t\t\tif (result.actionerror) {\n\t\t\t\tthis.setState({ editError: result.actionerror, changesMade: false, teamEdits: null });\n\t\t\t} else {\n\t\t\t\tthis.setState({ team: result.team, changesMade: false, teamEdits: null });\n\t\t\t}\n\t\t});\n\t}\n}\n"],"mappings":"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","ignoreList":[]}